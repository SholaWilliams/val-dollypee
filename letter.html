<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>For You ðŸ’–</title>
  <style>
    :root {
      --bg1: #ffe6f1;
      --bg2: #fff8fb;
      --card: #ffffffd6;
      --accent: #ff3b7a;
      --accentDark: #ff1f68;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100svh;
      font-family: system-ui, sans-serif;
      background: radial-gradient(circle at top, var(--bg2), var(--bg1));
      overflow: hidden;
      display: grid;
      place-items: center;
      padding: 18px;
    }

    .hearts {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 1;
    }

    /* Emoji hearts instead of CSS shapes */
    .emoji-heart {
      position: absolute;
      animation: fall linear forwards;
      filter: drop-shadow(0 6px 8px rgba(0,0,0,.12));
      opacity: 0.95;
      will-change: transform;
      user-select: none;
      pointer-events: none;
    }

    @keyframes fall {
      from { transform: translateY(-10vh) rotate(45deg); opacity: 0.95; }
      to { transform: translateY(110vh) rotate(45deg); opacity: 0.2; }
    }

    .card {
      position: relative;
      z-index: 2;
      width: min(760px, 94vw);
      background: var(--card);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 24px;
      box-shadow: 0 18px 60px rgba(0,0,0,.12);
    }

    h1 {
      margin: 0 0 12px;
      font-size: clamp(24px, 4vw, 40px);
      color: #2f1d2a;
      text-align: center;
    }

    p {
      margin: 0 0 14px;
      text-align: center;
      color: #4a2d3c;
    }

    textarea {
      width: 100%;
      min-height: 240px;
      resize: vertical;
      border-radius: 16px;
      border: 1px solid #f3b7c8;
      padding: 16px;
      font-size: 16px;
      line-height: 1.5;
      outline: none;
      background: #fff;
      box-shadow: inset 0 2px 8px rgba(0,0,0,.04);
    }

    textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(255,59,122,.18), inset 0 2px 8px rgba(0,0,0,.04);
    }

    .footer {
      margin-top: 12px;
      text-align: center;
      font-size: 13px;
      opacity: .7;
    }

    .button-row {
      margin-top: 16px;
      display: flex;
      justify-content: center;
      gap: 12px;
    }

    .accent-btn {
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 999px;
      padding: 12px 18px;
      font-weight: 700;
      box-shadow: 0 10px 24px rgba(0,0,0,.14);
      cursor: pointer;
    }

    .accent-btn:hover { background: var(--accentDark); }

    .music-btn {
      display: none; /* legacy; kept for compatibility */
    }

    /* Floating audio widget */
    .audio-widget {
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 5;
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(255,255,255,.8);
      backdrop-filter: blur(8px);
      border-radius: 14px;
      padding: 10px 12px;
      box-shadow: 0 12px 32px rgba(0,0,0,.18);
    }
    .audio-widget canvas { width: 160px; height: 50px; display: block; }
    .audio-widget .play-btn {
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 999px;
      padding: 8px 12px;
      font-weight: 700;
      box-shadow: 0 10px 24px rgba(0,0,0,.14);
      cursor: pointer;
    }
    .audio-widget .play-btn:hover { background: var(--accentDark); }
  </style>
</head>
<body>
  <div class="hearts" id="hearts"></div>
  <div id="audioWidget" class="audio-widget"></div>

  <main class="card">
    <h1>A little note for you</h1>
    <p>Write your message below âœ¨</p>
    <textarea placeholder="Dear ..."></textarea>
    <div class="button-row">
      <button id="nextBtn" class="accent-btn">Next: Photo Booth âžœ</button>
    </div>
    <div class="footer">Tip: You can resize the box to make it longer.</div>
  </main>

  <script>
    const hearts = document.getElementById("hearts");

    const emojis = ["â¤ï¸", "ðŸ’–", "ðŸ’˜", "ðŸ’•", "ðŸ’ž", "ðŸ’“", "ðŸ’—"];

    function spawnHeart() {
      const el = document.createElement("span");
      el.className = "emoji-heart";
      el.textContent = emojis[Math.floor(Math.random() * emojis.length)];

      const size = Math.random() * 22 + 18; // 18â€“40px
      const left = Math.random() * 100;     // vw
      const duration = Math.random() * 4 + 6; // 6â€“10s
      const delay = Math.random() * 1.5;      // 0â€“1.5s

      el.style.fontSize = size + "px";
      el.style.left = left + "vw";
      el.style.animationDuration = duration + "s";
      el.style.animationDelay = delay + "s";

      hearts.appendChild(el);

      const totalTime = (duration + delay) * 1000 + 250;
      setTimeout(() => el.remove(), totalTime);
    }

    for (let i = 0; i < 28; i++) spawnHeart();
    setInterval(spawnHeart, 360);

    // Pre-fill the letter content
    const textarea = document.querySelector("textarea");
    textarea.value = [
      "Dear Dolapo,",
      "",
      "I just wanted to say how much you mean to me.",
      "You make my days brighter and my heart lighter.",
      "Thank you for being you â€” kind, beautiful, and unforgettable.",
      "",
      "Will you be my Valentine? ðŸ’–",
      "",
      "With love,",
      "â€”"
    ].join("\n");

    // Navigate to photo booth
    document.getElementById("nextBtn").addEventListener("click", () => {
      window.location.href = "photobooth.html";
    });

    // Initialize shared audio player with random tracks
    const tracks = [
      "assets/music/ordinary.mp3"  ,          // default single track (optional)
    //   "assets/music/song1.mp3",
    //   "assets/music/song2.mp3",
    //   "assets/music/song3.mp3"
    ];
    window.addEventListener("DOMContentLoaded", () => {
      if (window.initMusicPlayer) {
        window.initMusicPlayer({ containerId: "audioWidget", tracks, autoStart: true });
      }
    });
  </script>
  <script src="assets/music/playlist.js"></script>
  <script src="assets/player.js"></script>
</body>
</html>
