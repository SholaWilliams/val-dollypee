<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Love Notes üíå</title>
  <style>
    :root { --bg1:#fff2f9; --bg2:#ffeaf5; --accent:#ff3b7a; --accentDark:#ff1f68; }
    *{box-sizing:border-box}
    body{margin:0;min-height:100svh;background:radial-gradient(circle at top,var(--bg2),var(--bg1));font-family:system-ui,sans-serif;display:grid;place-items:center;padding:18px; overflow:hidden;}
    .hearts{position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:1;}
    .emoji-heart{position:absolute; animation:fall linear forwards; filter:drop-shadow(0 6px 8px rgba(0,0,0,.12)); opacity:.95; will-change:transform; user-select:none; pointer-events:none;}
    @keyframes fall{from{transform:translateY(-10vh) rotate(45deg); opacity:.95;} to{transform:translateY(110vh) rotate(45deg); opacity:.2;}}
    .wrap{position:relative; z-index:2; width:min(900px,94vw);background:#ffffffd6;border-radius:18px;box-shadow:0 18px 60px rgba(0,0,0,.12);backdrop-filter:blur(10px);padding:20px;}
    h1{text-align:center;margin:6px 0 14px}
    .carousel{position:relative;overflow:hidden;border-radius:14px}
    .slides{display:flex;transition:transform .4s ease;}
    .note{flex:0 0 100%; padding:20px; display:grid; place-items:center; min-height:280px; background:linear-gradient(135deg,#ffe4ef,#f7f0ff); color:#3a2434; font-weight:700; font-size:clamp(18px,3.6vw,26px); text-align:center;}
    .controls{display:flex; justify-content:center; gap:10px; margin-top:12px}
    .btn{background:var(--accent); color:#fff; border:none; border-radius:999px; padding:10px 14px; font-weight:700; box-shadow:0 10px 24px rgba(0,0,0,.14); cursor:pointer}
    .btn:hover{background:var(--accentDark)}
    .dots{display:flex; justify-content:center; gap:6px; margin-top:8px}
    .dot{width:8px; height:8px; border-radius:999px; background:#e5c2d2;}
    .dot.active{background:#ff1f68}
    .nav{display:flex; justify-content:space-between; align-items:center; margin-bottom:8px}
    .nav .link{background:var(--accent); color:#fff; border:none; border-radius:999px; padding:8px 12px; font-weight:700; box-shadow:0 10px 24px rgba(0,0,0,.14); cursor:pointer}
    .nav .link:hover{background:var(--accentDark)}

    /* Audio widget */
    .audio-widget{position:fixed; right:16px; bottom:16px; z-index:5; display:flex; align-items:center; gap:10px; background:rgba(255,255,255,.8); backdrop-filter:blur(8px); border-radius:14px; padding:10px 12px; box-shadow:0 12px 32px rgba(0,0,0,.18);}
    .audio-widget canvas{width:160px; height:50px; display:block;}
    .audio-widget .play-btn{background:var(--accent); color:#fff; border:none; border-radius:999px; padding:8px 12px; font-weight:700; box-shadow:0 10px 24px rgba(0,0,0,.14); cursor:pointer;}
    .audio-widget .play-btn:hover{background:var(--accentDark)}
    .audio-widget .track-title{font-size:13px;}

    /* Secret popup */
    .secret-backdrop{position:fixed; inset:0; background:rgba(0,0,0,.5); backdrop-filter:blur(6px); display:flex; align-items:center; justify-content:center; z-index:20; opacity:0; pointer-events:none; transition:opacity .3s ease;}
    .secret-backdrop.show{opacity:1; pointer-events:auto;}
    .secret-card{background:#fff; padding:20px; border-radius:14px; box-shadow:0 18px 60px rgba(0,0,0,.18); max-width:420px; width:90%; text-align:center;}
    .secret-card h2{margin:0 0 10px;}
    .secret-card p{margin:8px 0; line-height:1.5; color:#3a2434;}
    .close-btn{margin-top:12px; background:var(--accent); color:#fff; border:none; border-radius:999px; padding:10px 14px; font-weight:700; cursor:pointer; box-shadow:0 10px 24px rgba(0,0,0,.14);}
    .close-btn:hover{background:var(--accentDark)}

    /* Tiny hidden trigger */
    .hidden-trigger{position:fixed; right:12px; bottom:12px; font-size:14px; opacity:0.35; cursor:pointer; z-index:21; user-select:none;}
    .hidden-trigger:hover{opacity:0.7;}
  </style>
</head>
<body>
  <div class="hearts" id="hearts"></div>
  <div id="audioWidget" class="audio-widget"></div>
  <div class="wrap">
    <div class="nav">
      <button class="link" onclick="location.href='letter.html'">Back</button>
      <h1>Love Notes</h1>
      <button class="link" onclick="location.href='photobooth.html'">Photos</button>
    </div>

    <div class="carousel" id="carousel">
      <div class="slides" id="slides">
      <div class="note">Still you. Always you. üíó</div>

<div class="note">Distance tried‚Ä¶ but failed. You still feel close. ‚ú®</div>

<div class="note">I look at you and feel grateful, not lucky ‚Äî grateful.</div>

<div class="note">My heart chose you long before I understood why.</div>

<div class="note">Loving you feels guided, not accidental.</div>

<div class="note">You + Me = God knew what He was doing üòå</div>

<div class="note">Sweetie, HOWW FARR NAAAAAA. ü§ç</div>

<div class="note">I almost wrote YOU ARE THE AIR I BREATHEüòÇ</div>

<div class="note">Mami, your love feels like home.</div>

<div class="note">Let my heart know your NAMEEEEE üòÇ‚ù§Ô∏è</div>

<div class="note">Dee‚Ä¶ you make my world softer without trying. üí´</div>

<div class="note">Dee Lolo, you are my peace and my joy.</div>

<div class="note">Aduke mi, my heart rests in you. ‚ù§Ô∏è</div>

<div class="note">MYYY INDAAAAAAAAAAAAAAAAAAAAAAAA‚ù§Ô∏è</div>

<div class="note">Your smile? Illegal. It steals my heart every time. üòå</div>

<div class="note">I blame you for my constant smiling. üôÉ</div>

<div class="note">Honestly‚Ä¶ you‚Äôre too sweet. It‚Äôs suspicious. üòÇ</div>

<div class="note">How are you this cute and still real? ü§®‚ù§Ô∏è</div>

<div class="note">OMO‚Ä¶ God really showed off when He made you. üòå‚ú®</div>

<div class="note">You are my happiest thought, every single day. üí≠üíó</div>

<div class="note">Even in silence‚Ä¶ it is still you I choose.</div>

<div class="note">If hearts recognize home‚Ä¶ mine found you.</div>

<div class="note">Forever sounds simple when it includes you. üíû</div>

      </div>
    </div>

    <div class="controls">
      <button class="btn" id="prev">‚óÄÔ∏è Prev</button>
      <button class="btn" id="next">Next ‚ñ∂Ô∏è</button>
    </div>
    <div class="dots" id="dots"></div>
  </div>

  <!-- Hidden trigger (Option A) -->
  <div class="hidden-trigger" id="hiddenTrigger" title="hi dee">dee</div>

  <!-- Secret popup (shared for time trigger and hidden click) -->
  <div class="secret-backdrop" id="secretBackdrop">
    <div class="secret-card">
      <h2 id="secretTitle">Hey Sweetie‚Ä¶</h2>
      <p id="secretBody">I know you‚Äôre still here reading. I just want you to know ‚Äî this world exists because of you. And I would build it again‚Ä¶ every time.</p>
      <button class="close-btn" id="secretClose">Close</button>
    </div>
  </div>

  <script>
    const slides = document.getElementById('slides');
    const dots = document.getElementById('dots');
    const total = slides.children.length;
    let idx = 0;

    function render(){ slides.style.transform = `translateX(-${idx*100}%)`; [...dots.children].forEach((d,i)=> d.classList.toggle('active', i===idx)); }
    function makeDots(){ for(let i=0;i<total;i++){ const d=document.createElement('div'); d.className='dot'; d.addEventListener('click', ()=>{ idx=i; render(); }); dots.appendChild(d);} render(); }
    document.getElementById('prev').addEventListener('click', ()=>{ idx=(idx-1+total)%total; render(); });
    document.getElementById('next').addEventListener('click', ()=>{ idx=(idx+1)%total; render(); });
    makeDots();

    // Auto-advance gently
    setInterval(()=>{ idx=(idx+1)%total; render(); }, 4500);

    // Secret popup logic (Options A & B)
    const backdrop = document.getElementById('secretBackdrop');
    const titleEl = document.getElementById('secretTitle');
    const bodyEl = document.getElementById('secretBody');
    const closeBtn = document.getElementById('secretClose');
    const trigger = document.getElementById('hiddenTrigger');

    function showSecret(t, b){
      titleEl.textContent = t;
      bodyEl.textContent = b;
      backdrop.classList.add('show');
      sessionStorage.setItem('secret_shown', '1');
    }
    function hideSecret(){ backdrop.classList.remove('show'); }
    closeBtn.addEventListener('click', hideSecret);
    backdrop.addEventListener('click', (e)=>{ if(e.target === backdrop) hideSecret(); });

    // Hidden click trigger (Option A)
    trigger.addEventListener('click', ()=>{
      showSecret('If you found this‚Ä¶', 'It means you looked deeper. Just like you did with me. And I‚Äôm grateful you chose to stay. ‚Äî Yours always.');
    });

    // Time-triggered popup (Option B) after 60s active
    let timer; let elapsed = 0; let last = performance.now();
    function step(now){
      const dt = now - last; last = now;
      if(!document.hidden){ elapsed += dt; }
      if(elapsed >= 60000 && !sessionStorage.getItem('secret_shown')){
        showSecret('Hey Sweetie‚Ä¶', 'I know you‚Äôre still here reading. I just want you to know something.. This world exists because of You. And I would build it again‚Ä¶ every time.');
        return;
      }
      timer = requestAnimationFrame(step);
    }
    if(!sessionStorage.getItem('secret_shown')){
      timer = requestAnimationFrame(step);
    }

    // Hearts
    (function(){
      const hearts = document.getElementById('hearts');
      const emojis = ['‚ù§Ô∏è','üíñ','üíò','üíï','üíû','üíì','üíó'];
      function spawnHeart(){
        const el=document.createElement('span'); el.className='emoji-heart'; el.textContent=emojis[Math.floor(Math.random()*emojis.length)];
        const size=Math.random()*20+18, left=Math.random()*100, duration=Math.random()*4+6, delay=Math.random()*1.5;
        el.style.fontSize=size+'px'; el.style.left=left+'vw'; el.style.animationDuration=duration+'s'; el.style.animationDelay=delay+'s';
        hearts.appendChild(el); setTimeout(()=>el.remove(), (duration+delay)*1000+250);
      }
      for(let i=0;i<24;i++) spawnHeart(); setInterval(spawnHeart, 360);
    })();

    // Music player
    const tracks = [
      'assets/music.mp3',
      'assets/music/song1.mp3',
      'assets/music/song2.mp3',
      'assets/music/song3.mp3'
    ];
    window.addEventListener('DOMContentLoaded', ()=>{
      if(window.initMusicPlayer){ window.initMusicPlayer({ containerId:'audioWidget', tracks, autoStart:true }); }
    });
  </script>
  <script src="assets/music/playlist.js"></script>
  <script src="assets/player.js"></script>
</body>
</html>
