<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Love Notes ğŸ’Œ</title>
  <style>
    :root { --bg1:#fff2f9; --bg2:#ffeaf5; --accent:#ff3b7a; --accentDark:#ff1f68; }
    *{box-sizing:border-box}
    body{margin:0;min-height:100svh;background:radial-gradient(circle at top,var(--bg2),var(--bg1));font-family:system-ui,sans-serif;display:grid;place-items:center;padding:18px; overflow:hidden;}
    .hearts{position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:1;}
    .emoji-heart{position:absolute; animation:fall linear forwards; filter:drop-shadow(0 6px 8px rgba(0,0,0,.12)); opacity:.95; will-change:transform; user-select:none; pointer-events:none;}
    @keyframes fall{from{transform:translateY(-10vh) rotate(45deg); opacity:.95;} to{transform:translateY(110vh) rotate(45deg); opacity:.2;}}
    .wrap{position:relative; z-index:2; width:min(900px,94vw);background:#ffffffd6;border-radius:18px;box-shadow:0 18px 60px rgba(0,0,0,.12);backdrop-filter:blur(10px);padding:20px;}
    h1{text-align:center;margin:6px 0 14px}
    .carousel{position:relative;overflow:hidden;border-radius:14px}
    .slides{display:flex;transition:transform .4s ease;}
    .note{flex:0 0 100%; padding:20px; display:grid; place-items:center; min-height:280px; background:linear-gradient(135deg,#ffe4ef,#f7f0ff); color:#3a2434; font-weight:700; font-size:clamp(18px,3.6vw,26px); text-align:center;}
    .controls{display:flex; justify-content:center; gap:10px; margin-top:12px}
    .btn{background:var(--accent); color:#fff; border:none; border-radius:999px; padding:10px 14px; font-weight:700; box-shadow:0 10px 24px rgba(0,0,0,.14); cursor:pointer}
    .btn:hover{background:var(--accentDark)}
    .dots{display:flex; justify-content:center; gap:6px; margin-top:8px}
    .dot{width:8px; height:8px; border-radius:999px; background:#e5c2d2;}
    .dot.active{background:#ff1f68}
    .nav{display:flex; justify-content:space-between; align-items:center; margin-bottom:8px}
    .nav .link{background:var(--accent); color:#fff; border:none; border-radius:999px; padding:8px 12px; font-weight:700; box-shadow:0 10px 24px rgba(0,0,0,.14); cursor:pointer}
    .nav .link:hover{background:var(--accentDark)}

    /* Audio widget */
    .audio-widget{position:fixed; right:16px; bottom:16px; z-index:5; display:flex; align-items:center; gap:10px; background:rgba(255,255,255,.8); backdrop-filter:blur(8px); border-radius:14px; padding:10px 12px; box-shadow:0 12px 32px rgba(0,0,0,.18);}
    .audio-widget canvas{width:160px; height:50px; display:block;}
    .audio-widget .play-btn{background:var(--accent); color:#fff; border:none; border-radius:999px; padding:8px 12px; font-weight:700; box-shadow:0 10px 24px rgba(0,0,0,.14); cursor:pointer;}
    .audio-widget .play-btn:hover{background:var(--accentDark)}
    .audio-widget .track-title{font-size:13px;}

    /* Secret popup */
    .secret-backdrop{position:fixed; inset:0; background:rgba(0,0,0,.5); backdrop-filter:blur(6px); display:flex; align-items:center; justify-content:center; z-index:20; opacity:0; pointer-events:none; transition:opacity .3s ease;}
    .secret-backdrop.show{opacity:1; pointer-events:auto;}
    .secret-card{background:#fff; padding:20px; border-radius:14px; box-shadow:0 18px 60px rgba(0,0,0,.18); max-width:420px; width:90%; text-align:center;}
    .secret-card h2{margin:0 0 10px;}
    .secret-card p{margin:8px 0; line-height:1.5; color:#3a2434;}
    .close-btn{margin-top:12px; background:var(--accent); color:#fff; border:none; border-radius:999px; padding:10px 14px; font-weight:700; cursor:pointer; box-shadow:0 10px 24px rgba(0,0,0,.14);}
    .close-btn:hover{background:var(--accentDark)}

    /* Tiny hidden trigger */
    .hidden-trigger{position:fixed; right:12px; bottom:12px; font-size:14px; opacity:0.35; cursor:pointer; z-index:21; user-select:none;}
    .hidden-trigger:hover{opacity:0.7;}
  </style>
</head>
<body>
  <div class="hearts" id="hearts"></div>
  <div id="audioWidget" class="audio-widget"></div>
  <div class="wrap">
    <div class="nav">
      <button class="link" onclick="location.href='photobooth.html'"  style="background:#7b5aa6">Back</button>
      <h1>Little Pieces from the Heartâ¤ï¸</h1>
      <button class="link" onclick="location.href='jsyk.html'">Next â†’ One More Thingâ€¦</button>
    </div>

    <div class="carousel" id="carousel">
      <div class="slides" id="slides">
      <div class="note">Still you. Always you. ğŸ’—</div>

<div class="note">Distance triedâ€¦ but failed. You still feel close. âœ¨</div>

<div class="note">I look at you and feel grateful, not lucky â€” grateful.</div>

<div class="note">My heart chose you long before I understood why.</div>

<div class="note">Loving you feels guided, not accidental.</div>

<div class="note">You + Me = God knew what He was doing ğŸ˜Œ</div>

<div class="note">Sweetie, HOWW FARR NAAAAAA. ğŸ¤</div>

<div class="note">I almost wrote YOU ARE THE AIR I BREATHEğŸ˜‚</div>

<div class="note">Mami, your love feels like home.</div>

<div class="note">Let my heart know your NAMEEEEE ğŸ˜‚â¤ï¸</div>

<div class="note">Deeâ€¦ you make my world softer without trying. ğŸ’«</div>

<div class="note">Dee Lolo, you are my peace and my joy.</div>

<div class="note">Aduke mi, my heart rests in you. â¤ï¸</div>

<div class="note">MYYY INDAAAAAAAAAAAAAAAAAAAAAAAAâ¤ï¸</div>

<div class="note">Your smile? Illegal. It steals my heart every time. ğŸ˜Œ</div>

<div class="note">I blame you for my constant smiling. ğŸ™ƒ</div>

<div class="note">Just know you are the 1 4 me ğŸ’—</div>

<div class="note">Can I call you Rose cause you make my world bloom. ğŸŒ¹</div>

<div class="note">Honestlyâ€¦ youâ€™re too sweet. Itâ€™s suspicious. ğŸ˜‚</div>

<div class="note">How are you this cute and still real? ğŸ¤¨â¤ï¸</div>

<div class="note">OMOâ€¦ God really showed off when He made you. ğŸ˜Œâœ¨</div>

<div class="note">You are my happiest thought, every single day. ğŸ’­ğŸ’—</div>

<div class="note">Even in silenceâ€¦ it is still you I choose.</div>

<div class="note">If hearts recognize homeâ€¦ mine found you.</div>

<div class="note">Forever sounds simple when it includes you. ğŸ’</div>

      </div>
    </div>

    <div class="controls">
      <button class="btn" id="prev">â—€ï¸ Prev</button>
      <button class="btn" id="next">Next â–¶ï¸</button>
    </div>
    <div class="dots" id="dots"></div>
  </div>

  <!-- Hidden trigger (Option A) -->
  <div class="hidden-trigger" id="hiddenTrigger" title="hi dee">dee</div>

  <!-- Secret popup (shared for time trigger and hidden click) -->
  <div class="secret-backdrop" id="secretBackdrop">
    <div class="secret-card">
      <h2 id="secretTitle">Hey Sweetieâ€¦</h2>
      <p id="secretBody">I know youâ€™re still here reading. I just want you to know â€” this world exists because of you. And I would build it againâ€¦ every time.</p>
      <button class="close-btn" id="secretClose">Close</button>
    </div>
  </div>

  <script>
    const slides = document.getElementById('slides');
    const dots = document.getElementById('dots');
    const total = slides.children.length;
    let idx = 0;
    let autoId = null;
    const autoDelay = 7500; // slower auto-advance

    function render(){
      slides.style.transform = `translateX(-${idx*100}%)`;
      [...dots.children].forEach((d,i)=> d.classList.toggle('active', i===idx));
    }

    function resetAuto(){
      if(autoId) clearInterval(autoId);
      autoId = setInterval(()=>{ idx=(idx+1)%total; render(); }, autoDelay);
    }

    function makeDots(){
      for(let i=0;i<total;i++){
        const d=document.createElement('div'); d.className='dot';
        d.addEventListener('click', ()=>{ idx=i; render(); resetAuto(); });
        dots.appendChild(d);
      }
      render();
    }

    document.getElementById('prev').addEventListener('click', ()=>{ idx=(idx-1+total)%total; render(); resetAuto(); });
    document.getElementById('next').addEventListener('click', ()=>{ idx=(idx+1)%total; render(); resetAuto(); });
    makeDots();
    resetAuto();

    // Secret popup logic (Options A & B)
    const backdrop = document.getElementById('secretBackdrop');
    const titleEl = document.getElementById('secretTitle');
    const bodyEl = document.getElementById('secretBody');
    const closeBtn = document.getElementById('secretClose');
    const trigger = document.getElementById('hiddenTrigger');

    function showSecret(t, b){
      titleEl.textContent = t;
      bodyEl.textContent = b;
      backdrop.classList.add('show');
      sessionStorage.setItem('secret_shown', '1');
    }
    function hideSecret(){ backdrop.classList.remove('show'); }
    closeBtn.addEventListener('click', hideSecret);
    backdrop.addEventListener('click', (e)=>{ if(e.target === backdrop) hideSecret(); });

    // Hidden click trigger (Option A)
    trigger.addEventListener('click', ()=>{
      showSecret('If you found thisâ€¦', 'It means you looked deeper. Just like you did with me. And Iâ€™m grateful you chose to stay. â€” Yours always.');
    });

    // Time-triggered popup (Option B) after 60s active
    let timer; let elapsed = 0; let last = performance.now();
    function step(now){
      const dt = now - last; last = now;
      if(!document.hidden){ elapsed += dt; }
      if(elapsed >= 60000 && !sessionStorage.getItem('secret_shown')){
        showSecret('Hey Sweetieâ€¦', 'I know youâ€™re still here reading. I just want you to know something.. This world exists because of You. And I would build it againâ€¦ every time.');
        return;
      }
      timer = requestAnimationFrame(step);
    }
    if(!sessionStorage.getItem('secret_shown')){
      timer = requestAnimationFrame(step);
    }

    // Hearts
    (function(){
      const hearts = document.getElementById('hearts');
      const emojis = ['â¤ï¸','ğŸ’–','ğŸ’˜','ğŸ’•','ğŸ’','ğŸ’“','ğŸ’—'];
      function spawnHeart(){
        const el=document.createElement('span'); el.className='emoji-heart'; el.textContent=emojis[Math.floor(Math.random()*emojis.length)];
        const size=Math.random()*20+18, left=Math.random()*100, duration=Math.random()*4+6, delay=Math.random()*1.5;
        el.style.fontSize=size+'px'; el.style.left=left+'vw'; el.style.animationDuration=duration+'s'; el.style.animationDelay=delay+'s';
        hearts.appendChild(el); setTimeout(()=>el.remove(), (duration+delay)*1000+250);
      }
      for(let i=0;i<24;i++) spawnHeart(); setInterval(spawnHeart, 360);
    })();

    // Music player
    const tracks = [
      'assets/music.mp3',
      'assets/music/song1.mp3',
      'assets/music/song2.mp3',
      'assets/music/song3.mp3'
    ];
    window.addEventListener('DOMContentLoaded', ()=>{
      if(window.initMusicPlayer){ window.initMusicPlayer({ containerId:'audioWidget', tracks, autoStart:true }); }
    });
  </script>
  <script src="assets/music/playlist.js"></script>
  <script src="assets/player.js"></script>
</body>
</html>
